<%@ page language="java" contentType="text/html; charset=UTF-8" pageEncoding="UTF-8" %>
    <%@ taglib prefix="c" uri="http://java.sun.com/jsp/jstl/core" %>
        <!DOCTYPE html>
        <html>

        <head>
            <meta charset="UTF-8">
            <title>Login</title>
            <link rel="shortcut icon" type="image/x-icon" href="/resource/duck.ico">
            <script src="https://code.jquery.com/jquery-3.6.1.min.js"
                integrity="sha256-o88AwQnZB+VDvE9tvIXrMQaPlFFSUTR+nldQm1LuPXQ=" crossorigin="anonymous">
                </script>
            <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.2.1/dist/css/bootstrap.min.css" rel="stylesheet"
                integrity="sha384-iYQeCzEYFbKjA/T2uDLTpkwGzCiq6soy8tYaI1GyVh/UjpbCx/TYkiZhlZB6+fzT"
                crossorigin="anonymous">
            <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.2.1/dist/js/bootstrap.bundle.min.js"
                integrity="sha384-u1OknCvxWvY5kfmNBILK2hRnQC3Pr17a+RTT6rIHI7NnikvbZlHgTPOOmMi466C8"
                crossorigin="anonymous"></script>
            <script src="//cdn.jsdelivr.net/npm/sweetalert2@11"></script>
            <script src="https://kit.fontawesome.com/be3915f36a.js" crossorigin="anonymous"></script>

            <style>
                * {
                    box-sizing: border-box;
                }

                .container {
                    margin-top: 20px;
                    padding: 20px;
                    border: 1px solid #808080;
                    width: 350px;
                    height: 400px;
                    min-width: 350px;
                }

                a:hover {
                    cursor: pointer
                }

                input {
                    padding-left: 5px;
                    padding-right: 5px;
                    width: 250px;
                    border: 0px;
                    border-bottom: 1px solid black;
                }

                input:focus {
                    outline: none;
                }

                button {
                    
                    width: 120px;
                }
            </style>
        </head>

        <body>
            <div class="container" align="center">
                <!-- <form id="form_login">
                    <div class="row justify-content-center loginBox">
                        <div class="col-12 text-end">
                            <a><i class="fa-solid fa-x" style="color:#808080"></i></a>
                        </div>
                        <div class="col-12 gy-4">
                            <div style="font-size:x-large">로그인</div>
                        </div>
                        <div class="col-12 gy-3">
                            <div class="text-start" style="width:250px">
                                <span style="color:#808080; font-size:x-small">이메일</span>
                            </div>
                            <input type="text" name="login_id" id="login_id" placeholder="이메일을 입력하세요." maxlength="40">
                        </div>
                        <div class="col-12 gy-4">
                            <div class="text-start" style="width:250px">
                                <span style="color:#808080; font-size:x-small">비밀번호</span>
                            </div>
                            <input type="password" name="login_pwd" id="login_pwd" placeholder="비밀번호를 입력하세요." maxlength="20">
                        </div>
                        <div class="col-12 gy-4">
                            <button type="button" id="btn_login">로그인</button>
                        </div>
                        <div class="col-12 gy-1">
                            <input class="form-check-input" type="checkbox" name="bs_login" id="bs_login">
                            <label class="form-check-label" for="bs_login" style="color:#404040; font-size:14px">운영자
                                로그인</label>
                        </div>
                        <div class="col-12 gy-3">
                            <span style="color:#404040">계정이 없으신가요?</span>
                            <a href="signup">회원 가입</a>
                        </div>
                        <div class="col-12 gy-1" style="color:#808080; font-size:small">
                            <a>아이디 찾기</a>
                            <span>/</span>
                            <a>비밀번호 찾기</a>
                        </div>
                    </div>
                </form> -->
                <form id="form_searchId">
                    <div class="row justify-content-center searchBox">
                        <div class="col-12 text-end">
                            <a><i class="fa-solid fa-x" style="color:#808080"></i></a>
                        </div>
                        <div class="col-12 gy-3">
                            <input type="text" name="id" id="id" placeholder="이름" maxlength="10">
                            <div class="text-start" style="width:250px">
                                <span style="color:#808080; font-size:x-small">회원 가입시 사용한 이름을 입력하세요.</span>
                            </div>
                        </div>
                        <div class="col-12 gy-3">
                            <input type="text" name="id" id="id" placeholder="핸드폰 번호" maxlength="10">
                            <div class="text-start" style="width:250px">
                                <span style="color:#808080; font-size:x-small">회원 가입시 사용한 핸드폰 번호 입력하세요.</span>
                            </div>
                        </div>
                        <div class="col-12 gy-4">
                            <button type="button" id="btn_login">로그인</button>
                        </div>
                        <div class="col-12 gy-1">
                            <input class="form-check-input" type="checkbox" name="bs_login" id="bs_login">
                            <label class="form-check-label" for="bs_login" style="color:#404040; font-size:14px">운영자
                                로그인</label>
                        </div>
                        <div class="col-12 gy-3">
                            <span style="color:#404040">계정이 없으신가요?</span>
                            <a href="signup">회원 가입</a>
                        </div>
                        <div class="col-12 gy-1" style="color:#808080; font-size:small">
                            <a>아이디 찾기</a>
                            <span>/</span>
                            <a>비밀번호 찾기</a>
                        </div>
                    </div>
                </form>
            </div>
            <script>
                // 떨림 애니메이션
                function wobble(element) {
                    let order = [0, -8, 8, -4, 4, -2, 2, -1, 1, 0];
                    let seq = [];
                    order.forEach(function (y) { seq.push({ transform: "translate(0," + y + "px)" }); });
                    element.animate(seq, { duration: 300 });
                }

                function tryLogin() {
                    $.post("/login.member", $("#form_login").serialize())
                        .done((res) => {
                            if (res == "true") {
                                Swal.fire({ title: "Success!", icon: "success", text: "로그인에 성공했습니다." })
                                    .then((result) => {
                                        if (result.isConfirmed) { location.reload(); }
                                    });
                            } else {
                                Swal.fire({ title: "Error", icon: "error", text: "ID가 등록되지 않았거나 비밀번호가 올바르지 않습니다." });
                            }
                        });
                }

                $("#btn_login").on("click", () => {
                    if ($("#login_id").val() == "") {
                        wobble($("#login_id")[0]);
                    } else if ($("#login_pwd").val() == "") {
                        wobble($("#login_pwd")[0]);
                    } else {
                        tryLogin();
                    }
                });
                $("input").on("keyup", (e) => { if (e.keyCode == 13) { $("#btn_login").click() } })
            </script>
        </body>

        </html>